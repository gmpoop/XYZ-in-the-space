<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/global.css">
    <link rel="stylesheet" href="./styles/puntuaciones/score.css">
    <title>Vec3 in the space</title>
    <style>
    
    
    </style>
</head>
<body>
    <div class="img-background">
        <img class="background" src="./resources/parallax-space-backgound.png" alt="">
        <img class="img-plannet-rings" src="./resources/parallax-space-ring-planet.png" alt="">
        <img class="img-plannet-stars" src="./resources/parallax-space-stars.png" alt="">
    </div>
    <div class="section start-section" id="start_section">

        <div class="menu-container">
            <h1 class="menu-title">Menú Principal</h1>
            <div class="menu-item">
                <a href="#" class="menu-link" onclick="updateURL('beg')">Iniciar Juego</a>
            </div>
            <div class="menu-item">
                <a href="#" id="configuration" class="menu-link" onclick="updateURL('conf')">Configuración</a>
            </div>
            <div class="menu-item">
                <a href="#" class="menu-link" onclick="updateURL('score')">Puntuaciones</a>
            </div>
            <div class="menu-item">
                <a href="#" class="menu-link">Salir</a>
            </div>
        </div>
    </div>

    <div class="section configuration-section" id="configuration_section">
        <div class="menu-container">
            <h1 class="menu-title">Configuración</h1>
            <div class="menu-item">
                <a href="#" class="menu-link">Dificultad</a>
            </div>
            <div class="menu-item">
                <a href="#" class="menu-link">Volumen</a>
            </div>
            <div class="menu-item">
                <a href="#" class="menu-link">Brillo</a>
            </div>
            <div class="menu-item">
                <a href="#" class="menu-link" onclick="updateURL('start')">Volver al menú</a>
            </div>
        </div>
    </div>

    
    
        <div class="section score-section" id="score_section">

                <div class="menu-container">
                        <h1 class="menu-title">Puntuaciones</h1>
                    <div class="menu-item">
                        <a href="#" class="menu-link" onclick="updateURLScore('local')">Local</a>
                    </div>
                    <div class="menu-item">
                        <a href="#" class="menu-link" onclick="updateURLScore('global')">Global</a>
                    </div>
                    <div class="menu-item">
                        <a href="#" class="menu-link" onclick="updateURL('start')">Volver al menú</a>
                    </div>
                </div>
        </div>


    <script>
        const start_section = document.getElementById('start_section');
        const configuration_section = document.getElementById('configuration_section');
        const score_section = document.getElementById('score_section');
        const score_table = document.getElementById('score_table');

        function updateURL(option) {

            if(option==="beg") {
                window.location.replace("InitLevel/InitLevel.html")
            }
            if(option==="conf") {
                window.location.replace("configuration.html")
            }
            // Agrega el parámetro a la URL
            const url = new URL(window.location);
            url.searchParams.set('wind', option);
            window.history.pushState({}, '', url);

            // Maneja el parámetro para realizar una acción
            handleNewStateParams(option);
        }

        
        function updateURLScore(option) {
            window.location.replace("score.html?option=" + option)
        }

        function handleNewStateParams(option) {
            if (option === 'conf') {
                configuration_section.classList.add('active');
                start_section.classList.remove('active');
            } 
            else if (option === 'score'){
                configuration_section.classList.remove('active');
                start_section.classList.remove('active');
                score_section.classList.add('active');
            }else if (option === 'start') {
                configuration_section.classList.remove('active');
                start_section.classList.add('active');
                score_section.classList.remove('active');
            }
        }

        function handleNewStateParamsScore(option) {
            if (option === 'global') {  
                score_table.classList.add('active');
                score_section.classList.remove('active');
            } 
            else if (option === 'local'){
                return false;
            }
        }

        // Detecta si hay un parámetro es la URL cuando la página se carga
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const option = params.get('wind');
            if (option) {
                handleNewStateParams(option);
            } else {
                // Inicialmente muestra la sección de inicio
                start_section.classList.add('active');
            }
        };
    </script>
</body>
</html>
